{"ast":null,"code":"import axios from \"axios\";\nconst API_BASE_URL = process.env.REACT_APP_API_URL || \"http://localhost:5001/api\";\n\n// Create API service factory that accepts token getter\nexport const createApiService = getAccessTokenSilently => {\n  const api = axios.create({\n    baseURL: API_BASE_URL,\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  });\n\n  // Add interceptor to include auth token\n  api.interceptors.request.use(async config => {\n    try {\n      const token = await getAccessTokenSilently();\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n    } catch (error) {\n      console.error(\"Error getting token:\", error);\n    }\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n  return {\n    // Get all conversations\n    getConversations: async () => {\n      const response = await api.get(\"/conversations\");\n      return response.data;\n    },\n    // Create a new conversation\n    createConversation: async () => {\n      const response = await api.post(\"/conversations\");\n      return response.data;\n    },\n    // Get a specific conversation\n    getConversation: async conversationId => {\n      const response = await api.get(`/conversations/${conversationId}`);\n      return response.data;\n    },\n    // Send a message to a conversation\n    sendMessage: async (conversationId, message) => {\n      const response = await api.post(`/conversations/${conversationId}/messages`, {\n        message: message\n      });\n      return response.data;\n    },\n    getAIResponse: async conversationId => {\n      const response = await api.post(`/conversations/${conversationId}/response`);\n      return response.data;\n    },\n    // Health check\n    healthCheck: async () => {\n      const response = await api.get(\"/health\");\n      return response.data;\n    }\n  };\n};\n\n// Default export for compatibility (won't include auth)\nexport const apiService = {\n  getConversations: async () => {\n    const response = await axios.get(`${API_BASE_URL}/conversations`);\n    return response.data;\n  },\n  createConversation: async () => {\n    const response = await axios.post(`${API_BASE_URL}/conversations`);\n    return response.data;\n  },\n  getConversation: async conversationId => {\n    const response = await axios.get(`${API_BASE_URL}/conversations/${conversationId}`);\n    return response.data;\n  },\n  sendMessage: async (conversationId, message) => {\n    const response = await axios.post(`${API_BASE_URL}/conversations/${conversationId}/messages`, {\n      message\n    });\n    return response.data;\n  },\n  getAIResponse: async conversationId => {\n    const response = await axios.post(`${API_BASE_URL}/conversations/${conversationId}/response`);\n    return response.data;\n  },\n  healthCheck: async () => {\n    const response = await axios.get(`${API_BASE_URL}/health`);\n    return response.data;\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","createApiService","getAccessTokenSilently","api","create","baseURL","headers","interceptors","request","use","config","token","Authorization","error","console","Promise","reject","getConversations","response","get","data","createConversation","post","getConversation","conversationId","sendMessage","message","getAIResponse","healthCheck","apiService"],"sources":["/Users/stefangjaja/Desktop/COS IW 03/prompt.ly/frontend/src/services/apiService.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_BASE_URL =\n  process.env.REACT_APP_API_URL || \"http://localhost:5001/api\";\n\n// Create API service factory that accepts token getter\nexport const createApiService = (getAccessTokenSilently) => {\n  const api = axios.create({\n    baseURL: API_BASE_URL,\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n\n  // Add interceptor to include auth token\n  api.interceptors.request.use(\n    async (config) => {\n      try {\n        const token = await getAccessTokenSilently();\n        if (token) {\n          config.headers.Authorization = `Bearer ${token}`;\n        }\n      } catch (error) {\n        console.error(\"Error getting token:\", error);\n      }\n      return config;\n    },\n    (error) => {\n      return Promise.reject(error);\n    }\n  );\n\n  return {\n    // Get all conversations\n    getConversations: async () => {\n      const response = await api.get(\"/conversations\");\n      return response.data;\n    },\n\n    // Create a new conversation\n    createConversation: async () => {\n      const response = await api.post(\"/conversations\");\n      return response.data;\n    },\n\n    // Get a specific conversation\n    getConversation: async (conversationId) => {\n      const response = await api.get(`/conversations/${conversationId}`);\n      return response.data;\n    },\n\n    // Send a message to a conversation\n    sendMessage: async (conversationId, message) => {\n      const response = await api.post(\n        `/conversations/${conversationId}/messages`,\n        {\n          message: message,\n        }\n      );\n      return response.data;\n    },\n\n    getAIResponse: async (conversationId) => {\n      const response = await api.post(\n        `/conversations/${conversationId}/response`\n      );\n      return response.data;\n    },\n\n    // Health check\n    healthCheck: async () => {\n      const response = await api.get(\"/health\");\n      return response.data;\n    },\n  };\n};\n\n// Default export for compatibility (won't include auth)\nexport const apiService = {\n  getConversations: async () => {\n    const response = await axios.get(`${API_BASE_URL}/conversations`);\n    return response.data;\n  },\n  createConversation: async () => {\n    const response = await axios.post(`${API_BASE_URL}/conversations`);\n    return response.data;\n  },\n  getConversation: async (conversationId) => {\n    const response = await axios.get(\n      `${API_BASE_URL}/conversations/${conversationId}`\n    );\n    return response.data;\n  },\n  sendMessage: async (conversationId, message) => {\n    const response = await axios.post(\n      `${API_BASE_URL}/conversations/${conversationId}/messages`,\n      { message }\n    );\n    return response.data;\n  },\n  getAIResponse: async (conversationId) => {\n    const response = await axios.post(\n      `${API_BASE_URL}/conversations/${conversationId}/response`\n    );\n    return response.data;\n  },\n  healthCheck: async () => {\n    const response = await axios.get(`${API_BASE_URL}/health`);\n    return response.data;\n  },\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}